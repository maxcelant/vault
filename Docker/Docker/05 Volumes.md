#### Overview

Preferred mechanism for persisting data generated by and used by Docker containers.

This is important because Docker containers are _ephemeral_. Their data gets lost when the container is removed or stopped. There are times that you want that data to persist to share to other containers or other cases.

Think about if you were running a database, you'd want that data to persist.

Volumes let us attach a specific filesystems path of the container with a certain directory of the host machine or with the directory of another container.

Volumes can be shared and reused among containers.

#### Types of Volumes

1. **Anonymous Volumes:** These are volumes that do not have a specific source. Docker creates a random source on the host system whenever the container starts and uses that.
    
2. **Named Volumes:** These are volumes where you provide the name and Docker uses that name to store the data on the host system in the directory `/var/lib/docker/volumes/`.
    
3. **Bind Mounts:** These are volumes where you specify the exact location on the host system for Docker to store the data.


#### Creating a Volume

```bash
docker run -d --name devtest -v myvol:/app nginx:latest
```

In the above command, `myvol` is the name of the volume and `/app` is the path within the container where the volume should be mounted.

#### Listing a Volume

Use `docker volume ls` to see all the volumes that exist on the host machine.

#### Removing Volumes

```bash
docker volume rm myvol
```

#### Inspecting a Volume

```bash
docker volume inspect myvol
```

#### Volumes in Dockerfiles

```dockerfile
FROM ubuntu:latest
RUN mkdir /myvol
RUN echo "hello world" > /myvol/greeting
VOLUME /myvol
```

#### Bind Mount
You can specify the directory of where you want the volume to be on the host machine.

```bash
docker run -d --name my_container -v /path/on/host:/path/in/container my_image
```

#### Binding at Runtime vs Build time
Generally better do it at runtime using **`-v`** since you can attach storage to a container the moment its created and pre-populate the volume with data you need. 

#### Pruning a Volume

```bash
docker volume prune
```

##### Questions
- **Multiple containers can attach the same volume:** Multiple containers can mount the same volume concurrently, and the data within the volume will be available to all of them. 
- **Starting a volume in one container and using it in another:** A volume's lifecycle is separate from that of any individual container.
- **Bind Mount vs Volume:** A volume is managed by Docker and stored in a part of the host file system managed by docker. A bind mount, can be stored anywhere on the host system.


